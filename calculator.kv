#:kivy 1.0.9
<ScreenManagement>
    CalculatorGUI:
        id: calculator_gui
        name: "calculator"
    ResultGUI:
        id: result_gui
        name: "result"

<CalculatorGUI>:

    BoxLayout
        orientation: 'vertical'
        padding: 20
        spacing: 10

        # title row: tile
        Label:
            text: 'Daily Calorie Need Calulator'
            text_size: root.width, None
            font_size: 55
            bold: True
            color: 0, 0, 0, 1
            halign: 'center'
            valign: 'center'
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20]
        
        # Age Row: age, user input box, unit
        BoxLayout:
            Label:
                text: 'Age: '
                font_size: 35
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            

            TextInput:
                id: age
                multiline: False
                cursor_color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 210/255, 210/255, 210/255, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                canvas.before:
                    Color:
                        rgba: 180/255, 180/255, 180/255, 1
                    Line:
                        width: 1
                        rectangle: self.x, self.y, self.width, self.height

            Label:
                text: 'years old'
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
        

        # Gender Row: gender, male, checkbox, female, checkbox
        BoxLayout:
            
            Label:
                id: gender_label
                text: 'Gender: '
                color: 0, 0, 0, 1
                size_hint_x: None
                width: 500
                font_size: 35
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label:
                text: "Male"
                font_size: 25
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            CheckBox:
                group: "gender"
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                on_active: root.checkbox_click(self, self.active, "Male" )
            Label:
                text: "Female"
                font_size: 25
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            CheckBox:
                group: "gender"
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                on_active: root.checkbox_click(self, self.active, "Female")


        # Weight Row: weight, user input box, unit(kg)
        BoxLayout:
            Label:
                text: 'Weight: '
                font_size: 35
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            TextInput:
                id: weight
            Label:
                text: 'kg'
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            

        # Height Row: height, user input box, unit(cm)
        BoxLayout:
            Label:
                text: 'Height: '
                font_size: 35
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
            TextInput:
                id: height_input
            Label:
                text: 'cm'
                color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size


        # Activity Level: spinner
        BoxLayout:
            Label:
                id: activity_label
                text: 'Activity Level: '
                font_size: 35
                color: 0, 0, 0, 1
                size_hint_x: None
                width: 500
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Spinner:
                id: activity_spinner
                text: 'Select activity level'
                values: 'Sedentary: little or no exercise', 'Lightly Active: light exercise 1-3 times/week', 'Moderately Active: light to moderate exercise 4-5 times/week', 'Active: moderate exercise 6-7 times/week or intense exercise 3-4 times/week', 'Very Active: intense exercise 6-7 times/week'
                background_color: 90/255, 95/255, 90/255, 1
                on_text: root.spinner_selected(activity_spinner.text)
        
        BoxLayout:
            Label: 
                text: 'Weight Goal: '
            TextInput:
                id: weight_goal
            Label:
                text: 'kg'
            Label: 
                text: 'in'
            TextInput:
                id: months
            Label:
                text: 'months'
             
             

        # Submit Row: submit button
        BoxLayout:
            Button:
                text: 'Submit'
                on_press: root.validate_input()
                on_release: root.manager.current = "result"





    # Result Page
<ResultGUI>
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10

        # title row: tile
        Label:
            text: 'Your Results'
            text_size: root.width, None
            font_size: 55
            bold: True
            color: 0, 0, 0, 1
            halign: 'center'
            valign: 'center'
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20]

        
        Label:
            id: result_bmr_label
            text: ''
        Label:
            id: result_bmi_label
            text: ''
        Label:
            id: result_total_calorie_label
            text: ''

        Label:
            text: ''
            id: achieve_goal
            font_size: 35
            color: 0, 0, 0, 1
            halign: 'center'
            valign: 'center'
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20]
        Label:
            id: result_weight_goal_calorie_label
            text: ''
            multiline: True
        Label:
            id: carb_daily_needs_label
            text: ''
        Label:
            id: pro_daily_needs_label
            text: ''
        Label:
            id: fat_daily_needs_label
            text: ''   
        
        
        Button:
            text: 'Back'
            on_press: root.manager.current = "calculator"